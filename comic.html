<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Comic</title>
</head>
<body>
<h1 id="title">Comic</h1>
<img src="" alt="comic img" id="comic-img">
<h2 id="date">Date</h2>
<script>
    const img = document.getElementById("comic-img");
    const title = document.getElementById("title");
    const date = document.getElementById("date");

    function fetchID(email){
        const params = new URLSearchParams();
        params.append('email', email);
        return fetch('https://fwd.innopolis.university/api/hw2?' + params.toString())
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                fetchContentByID(data);
            })
    }

    function fetchContentByID(id){
        return fetch('https://fwd.innopolis.university/api/comic?id=' + id.toString())
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                title.textContent = data.safe_title;
                img.src = data.img;
                const day = data.day;
                const month = data.month;
                const year = data.year;
                const event = new Date(year, month, day);
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                date.textContent = event.toLocaleDateString(options);
                console.log(data);
            })
    }

    const id = fetchID('d.koncheva@innopolis.university');

</script>
</body>
</html>