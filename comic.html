<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Comic</title>
</head>
<body>
<h1 id="title">Comic</h1>
<img src="" alt="comic img" id="comic-img">
<h2 id="date">Date</h2>
<script>
    const img = document.getElementById("comic-img");
    const title = document.getElementById("title");
    const date = document.getElementById("date");

    function fetchID(email){
        const params = new URLSearchParams();
        params.append('email', email);
        return fetch('https://fwd.innopolis.university/api/hw2?' + params.toString())
            .then(function (response) {
                return response.json();
            })
    }

    function fetchContentByID(id){
        return fetch('https://fwd.innopolis.university/api/comic?id=' + id.toString())
            .then(function (response) {
                return response.json();
            })
    }

    async function main(){
        const id = await fetchID('d.koncheva@innopolis.university');
        const data = await fetchContentByID(id);

        title.textContent = data.safe_title;
        img.alt = data.alt;
        img.src = data.img;
        const eventDate = new Date(data.year, data.month, data.day);
        date.textContent = eventDate.toLocaleDateString();
    }

    main();

</script>
</body>
</html>